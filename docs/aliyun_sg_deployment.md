# é˜¿é‡Œäº‘æ–°åŠ å¡ â€” DevKit Suite é€‰å‹è´­ä¹°éƒ¨ç½²æ–¹æ¡ˆ

> ç›®æ ‡ï¼š**æˆæœ¬æœ€ä¼˜** + **å›½å†…å¤–å‡å¯è®¿é—®** + å…å¤‡æ¡ˆ + **OpenAI/Gemini API ç›´è¿**

> [!IMPORTANT]
> **ä¸ºä»€ä¹ˆé€‰æ–°åŠ å¡è€Œä¸æ˜¯é¦™æ¸¯ï¼Ÿ**
>
> OpenAIï¼ˆ2024å¹´7æœˆèµ·ï¼‰å’Œ Google Gemini API å‡**ä¸æ”¯æŒé¦™æ¸¯åœ°åŒº**ï¼Œä»é¦™æ¸¯æœåŠ¡å™¨è°ƒç”¨ä¼šè¢«æ‹’ç»æˆ–å°å·ã€‚
> æ–°åŠ å¡å±äº OpenAI/Gemini/Claude çš„**å®˜æ–¹æ”¯æŒåœ°åŒº**ï¼Œå¯ç›´è¿æ‰€æœ‰ä¸»æµ LLM APIã€‚

---

## 1. æ¨èé…ç½®

### 1.1 æœåŠ¡å™¨é€‰å‹

| é¡¹ç›® | è§„æ ¼ | ä»·æ ¼ | å¤‡æ³¨ |
|------|------|------|------|
| **ECS å®ä¾‹** | é€šç”¨ç®—åŠ›å‹ u1, 2C4G | **~199-299 å…ƒ/å¹´** | æ–°åŠ å¡åŒºåŸŸï¼Œå…³æ³¨æ´»åŠ¨é¡µ |
| **ç³»ç»Ÿç›˜** | 80G ESSD Entry | åŒ…å«åœ¨å®ä¾‹ä¸­ | SQLite + æ—¥å¿— + å¤‡ä»½ |
| **å…¬ç½‘å¸¦å®½** | 5M å›ºå®šå¸¦å®½ | åŒ…å«åœ¨å®ä¾‹ä¸­ | çˆ¬å– + API è°ƒç”¨å¤Ÿç”¨ |
| **æ“ä½œç³»ç»Ÿ** | Ubuntu 22.04 LTS | å…è´¹ | éƒ¨ç½²è„šæœ¬åŸºäºæ­¤ç³»ç»Ÿ |

### 1.2 ç½‘ç»œå»¶è¿Ÿå‚è€ƒ

| åœ°åŒº | åˆ°æ–°åŠ å¡å»¶è¿Ÿ | è¯´æ˜ |
|------|-------------|------|
| å¹¿å· | ~30-50ms | å¾ˆå¥½ |
| ä¸Šæµ· | ~50-70ms | è‰¯å¥½ |
| åŒ—äº¬ | ~70-100ms | å¯æ¥å— |
| ä¸œäº¬ | ~70-90ms | è‰¯å¥½ |
| ç¾è¥¿ | ~170-200ms | â€” |

æ¯”é¦™æ¸¯é«˜çº¦ 20-30msï¼Œä½†æ¢æ¥çš„æ˜¯ **OpenAI/Gemini/Claude/Telegram å…¨éƒ¨ç›´è¿å¯ç”¨**ã€‚

### 1.3 LLM API å¯ç”¨æ€§

| API | é¦™æ¸¯ | æ–°åŠ å¡ |
|-----|------|--------|
| OpenAI GPT-4o | âŒ è¢«å° | âœ… ç›´è¿ |
| Google Gemini | âŒ ä¸æ”¯æŒ | âœ… ç›´è¿ |
| Anthropic Claude | âœ… | âœ… ç›´è¿ |
| Telegram Bot API | âœ… | âœ… ç›´è¿ |

### 1.4 å¹´åº¦æˆæœ¬ä¼°ç®—

| é¡¹ç›® | å¹´æˆæœ¬ |
|------|--------|
| ECS u1 2C4Gï¼ˆæ–°åŠ å¡ï¼‰ | ~199-299 å…ƒ |
| LLM API (gpt-4o-mini) | ~12-20 å…ƒ/å¹´ |
| Telegram Bot | å…è´¹ |
| **æ€»è®¡** | **~211-319 å…ƒ/å¹´ï¼ˆæœˆå‡ ~18-27 å…ƒï¼‰** |

---

## 2. è´­ä¹°æ­¥éª¤

1. è®¿é—® [é˜¿é‡Œäº‘ ECS æ´»åŠ¨é¡µ](https://www.aliyun.com/activity/new)
2. é€‰æ‹© **é€šç”¨ç®—åŠ›å‹ u1** â€” 2æ ¸4G / 5M / 80G ESSD Entry
3. åœ°åŸŸé€‰æ‹© **æ–°åŠ å¡**
4. æ“ä½œç³»ç»Ÿé€‰æ‹© **Ubuntu 22.04 64ä½**
5. è´­ä¹°æ—¶é•¿ **1 å¹´**
6. è®¾ç½® root å¯†ç æˆ– SSH å¯†é’¥å¯¹
7. ç¡®è®¤ä¸‹å•æ”¯ä»˜

> [!NOTE]
> å¦‚æœæ´»åŠ¨ä»·å·²å”®ç½„ï¼Œå¯æ‰‹åŠ¨é€‰æ‹©ï¼š
>
> - åœ°åŸŸï¼šæ–°åŠ å¡
> - å®ä¾‹ç±»å‹ï¼šecs.u1-c1m2.largeï¼ˆ2C4Gï¼‰
> - åŒ…å¹´åŒ…æœˆï¼Œé€‰ 1 å¹´
> - æŸ¥çœ‹å®é™…æŠ¥ä»·åè´­ä¹°

### å®‰å…¨ç»„é…ç½®

è´­ä¹°ååœ¨æ§åˆ¶å° â†’ å®‰å…¨ç»„ï¼Œæ·»åŠ ä»¥ä¸‹è§„åˆ™ï¼š

| æ–¹å‘ | åè®® | ç«¯å£ | æ¥æº | ç”¨é€” |
|------|------|------|------|------|
| å…¥ç«™ | TCP | 22 | ä½ çš„IP/0.0.0.0/0 | SSH ç®¡ç† |
| å…¥ç«™ | TCP | 8080 | 0.0.0.0/0 | MCP Serverï¼ˆå¯é€‰ï¼‰ |
| å‡ºç«™ | TCP | 443 | 0.0.0.0/0 | HTTPS |
| å‡ºç«™ | TCP | 80 | 0.0.0.0/0 | HTTP |

---

## 3. ä¸€é”®éƒ¨ç½²

è´­ä¹°å¹¶ SSH ç™»å½•æœåŠ¡å™¨åï¼Œåªéœ€æ‰§è¡Œä¸€æ¡å‘½ä»¤ï¼š

```bash
ssh root@<your-server-ip>

# ä¸€é”®éƒ¨ç½²ï¼ˆçº¦ 2-3 åˆ†é’Ÿï¼‰
git clone https://github.com/RobinCoderZhao/devkit-suite.git /tmp/devkit
bash /tmp/devkit/deploy/setup.sh
```

**è„šæœ¬è‡ªåŠ¨å®Œæˆä»¥ä¸‹æ‰€æœ‰æ“ä½œï¼š**

| æ­¥éª¤ | æ“ä½œ | è¯´æ˜ |
|------|------|------|
| 1 | ç³»ç»Ÿæ›´æ–° + ä¾èµ–å®‰è£… | apt update, git, curl, sqlite3, ufw, fail2ban |
| 2 | åˆ›å»º deploy ç”¨æˆ· | é root è¿è¡ŒæœåŠ¡ |
| 3 | å®‰è£… Go 1.25 | å…¨å±€å¯ç”¨ |
| 4 | å…‹éš†ä»£ç  + ç¼–è¯‘ | æ„å»º newsbot, devkit, watchbot ä¸‰ä¸ªäºŒè¿›åˆ¶ |
| 5 | åˆå§‹åŒ– SQLite æ•°æ®åº“ | è‡ªåŠ¨å»ºåº“å»ºè¡¨ï¼ˆarticles + digests + ç´¢å¼•ï¼‰ |
| 6 | åˆ›å»ºç¯å¢ƒé…ç½®æ–‡ä»¶ | `/opt/devkit-suite/.env` |
| 7 | é…ç½® Systemd æœåŠ¡ | newsbot + watchbot è‡ªå¯ + æ¯å‘¨è‡ªåŠ¨å¤‡ä»½ |
| 8 | å®‰å…¨åŠ å›º | UFW é˜²ç«å¢™ + fail2ban é˜²æš´åŠ›ç ´è§£ |

### éƒ¨ç½²å®Œæˆå

```bash
# 1ï¸âƒ£ ç¼–è¾‘ç¯å¢ƒå˜é‡ï¼ˆå¡«å…¥ä½ çš„ API Keyï¼‰
nano /opt/devkit-suite/.env

# 2ï¸âƒ£ å¯åŠ¨æœåŠ¡
sudo systemctl start newsbot watchbot

# 3ï¸âƒ£ éªŒè¯
sudo systemctl status newsbot
sudo journalctl -u newsbot -f

# 4ï¸âƒ£ æ‰‹åŠ¨æµ‹è¯•ï¼ˆå¯é€‰ï¼‰
sudo -u deploy /opt/devkit-suite/bin/newsbot run
sudo -u deploy /opt/devkit-suite/bin/watchbot check
sudo -u deploy /opt/devkit-suite/bin/watchbot targets
```

---

## 4. è¿ç»´å·¥å…·

### 4.1 å‡çº§éƒ¨ç½²

```bash
# æ‹‰å–æœ€æ–°ä»£ç ã€é‡æ–°æ„å»ºã€é‡å¯æœåŠ¡
bash /opt/devkit-suite/deploy/upgrade.sh
```

### 4.2 çŠ¶æ€æ£€æŸ¥

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€ã€èµ„æºå ç”¨ã€æ•°æ®åº“ç»Ÿè®¡ã€å¤‡ä»½çŠ¶æ€
bash /opt/devkit-suite/deploy/status.sh
```

è¾“å‡ºç¤ºä¾‹ï¼š

```
ğŸ“¦ æœåŠ¡çŠ¶æ€:
  âœ… newsbot: è¿è¡Œä¸­
  âœ… watchbot: è¿è¡Œä¸­

ğŸ’» ç³»ç»Ÿèµ„æº:
  CPU: 2 æ ¸
  å†…å­˜: 312M / 3.8G (8.2%)
  ç£ç›˜: 2.1G / 80G (3%)

ğŸ—„ï¸  æ•°æ®åº“:
  æ–‡ç« æ•°é‡: 1,234
  æ—¥æŠ¥æ•°é‡: 42
  æœ€æ–°æ—¥æŠ¥: 2026-02-18
```

### 4.3 æ—¥å¿—æŸ¥çœ‹

```bash
# å®æ—¶æ—¥å¿—
sudo journalctl -u newsbot -f
sudo journalctl -u watchbot -f

# æœ€è¿‘ 1 å°æ—¶
sudo journalctl -u newsbot --since "1 hour ago"

# åªçœ‹é”™è¯¯
sudo journalctl -u newsbot -p err
```

### 4.4 æ•°æ®å¤‡ä»½

ç³»ç»Ÿå·²è‡ªåŠ¨é…ç½®æ¯å‘¨æ—¥å‡Œæ™¨ 3 ç‚¹å¤‡ä»½ SQLiteï¼Œä¿ç•™æœ€è¿‘ 30 å¤©ã€‚æ‰‹åŠ¨å¤‡ä»½ï¼š

```bash
cp /opt/devkit-suite/data/newsbot.db /opt/devkit-suite/data/backups/manual_$(date +%Y%m%d).db
```

---

## 5. ç›®å½•ç»“æ„ï¼ˆéƒ¨ç½²åï¼‰

```
/opt/devkit-suite/
â”œâ”€â”€ bin/
â”‚   â”œâ”€â”€ newsbot          # AI æ–°é—»æ—¥æŠ¥
â”‚   â”œâ”€â”€ devkit           # å¼€å‘è€… CLI
â”‚   â””â”€â”€ watchbot         # ç«å“ç›‘æ§
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ newsbot.db       # SQLite æ•°æ®åº“
â”‚   â””â”€â”€ backups/         # è‡ªåŠ¨å¤‡ä»½
â”œâ”€â”€ deploy/
â”‚   â”œâ”€â”€ setup.sh         # ä¸€é”®éƒ¨ç½²
â”‚   â”œâ”€â”€ upgrade.sh       # å‡çº§è„šæœ¬
â”‚   â””â”€â”€ status.sh        # çŠ¶æ€æ£€æŸ¥
â”œâ”€â”€ .env                 # ç¯å¢ƒå˜é‡ï¼ˆAPI Key ç­‰ï¼‰
â””â”€â”€ ...                  # æºä»£ç 
```

---

## 6. ç¯å¢ƒå˜é‡è¯´æ˜

| å˜é‡ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `LLM_API_KEY` | âœ… | â€” | LLM API å¯†é’¥ |
| `LLM_PROVIDER` | âŒ | `openai` | `openai` / `gemini` / `claude` / `ollama` |
| `LLM_MODEL` | âŒ | `gpt-4o-mini` | æ¨¡å‹åç§° |
| `TELEGRAM_BOT_TOKEN` | âŒ | â€” | Telegram Bot Tokenï¼ˆç•™ç©ºåˆ™è¾“å‡ºåˆ°æ—¥å¿—ï¼‰ |
| `TELEGRAM_CHANNEL_ID` | âŒ | â€” | é¢‘é“ IDï¼Œå¦‚ `@my_channel` |
| `NEWSBOT_DB` | âŒ | è§ .env | SQLite æ•°æ®åº“è·¯å¾„ |

---

## 7. æ•…éšœæ’æŸ¥

| é—®é¢˜ | æ’æŸ¥ |
|------|------|
| LLM è°ƒç”¨å¤±è´¥ | æ£€æŸ¥ `LLM_API_KEY` æ˜¯å¦æ­£ç¡®ï¼›`curl https://api.openai.com` æµ‹è¯•è¿é€šæ€§ |
| Telegram æ¨é€å¤±è´¥ | ç¡®è®¤ Bot å·²åŠ å…¥é¢‘é“ä¸”æœ‰å‘é€æƒé™ |
| æœåŠ¡å¯åŠ¨å¤±è´¥ | `journalctl -u newsbot -n 50` æŸ¥çœ‹é”™è¯¯æ—¥å¿— |
| æ•°æ®åº“é” | ç¡®ä¿åªæœ‰ä¸€ä¸ªè¿›ç¨‹å†™å…¥ï¼›WAL æ¨¡å¼å·²é»˜è®¤å¼€å¯ |
| SSH è¿ä¸ä¸Š | æ£€æŸ¥å®‰å…¨ç»„æ˜¯å¦æ”¾è¡Œ 22 ç«¯å£ï¼›`ufw status` æŸ¥çœ‹é˜²ç«å¢™ |
| ç£ç›˜ç©ºé—´ä¸è¶³ | `df -h` æ£€æŸ¥ï¼›æ¸…ç†æ—§å¤‡ä»½ `find /opt/devkit-suite/data/backups -mtime +7 -delete` |
